---
title: "Logistic Regression"
subtitle: "BIOST 311, Discussion Section Week 7"
author: "Nina Galanter"
date: \today
output: 
  pdf_document:
    toc: false
header-includes:
  - \usepackage{color}
  - \usepackage{fvextra}
  - \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
library(formatR)

knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(error = FALSE)
knitr::opts_chunk$set(warning = FALSE)
knitr::opts_chunk$set(message = FALSE)
#knitr::opts_chunk$set(results = "hide")
```

# Introduction

In this discussion section, we'll walk through a logistic regression analysis. We will use the `HIV` dataset that we have been using in class.

The dataset is called `HIV.csv`, and is available on the Canvas site on the Week 7 module. The code is provided below to load the dataset directly from github, but you may download it to your personal machine and load it in that way if you prefer.

```{r}
library(tidyverse)
library(readr)
HIV <- read_csv(url("https://raw.githubusercontent.com/ngalanter/BIOST311_2023/main/Datasets/HIV.csv"))
```

So far we have investigated the relationship between whether or not someone received an incentive and whether they decided to go get their HIV test results. Today, we will look at the relationship between the amount of money received as an incentive and whether someone chooses to go get their HIV test results.

# Exploratory plot and set-up

1. Create a new dataset with only those participants who received an incentive. Provide descriptive summary statistics for the variable `results` within this new dataset.


**Use the dataset with only people who received an incentive for the rest of this worksheet.**

2. Create an exploratory plot that describes the relationship between getting results and incentive amount. How would you describe the relationship between these two variables?


# Simple logistic regression

3. Fit a simple logistic regression model with whether someone got results as the outcome and incentive amount as the predictor of interest. Interpret the results of your analysis using an odds ratio in context, and conduct a hypothesis test. Make sure to report uncertainty in the form of a confidence interval in addition to a point estimate.

# Multiple logistic regression

We are interested in whether age is an effect modifier of the association between incentive amount and choosing to receive HIV test results.

4. Fit a multiple logistic regression model with choosing to get HIV test results as the outcome, incentive amount as the predictor of interest, and age in years as an effect modifier. Interpret the interaction term in context, and conduct a hypothesis test of whether age is an effect modifier. Make sure to report uncertainty in the form of a confidence interval in addition to a point estimate.


5. Report and interpret the odds ratio of the association between incentive amount and getting results at the mean age in the dataset (rounded to the nearest year).
